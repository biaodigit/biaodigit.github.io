<!DOCTYPE html>
<html class="loading">
  <head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
  <link rel="shortcut icon" href="/avatar.JPG">
  <title>罗文迪的博客</title>
  <link rel="stylesheet" href="/css/style.css">
</head>

  <body>
    <div class="page post">
  <div id="post">
    <div onclick="location='/'" class="back"><svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M774.327684 466.559277l-359.779797 0.322531L524.880994 358.559096c18.440678-18.022689 18.440678-47.248633 0-65.271322-18.446463-18.027028-48.343503-18.027028-66.789966-0.004339L273.231548 474.785989c-1.988701 1.411616-3.886282 2.982328-5.678282 4.733831-1.942418 1.899028-3.666441 3.92678-5.202441 6.04565-5.870644 7.694463-9.344723 17.237333-9.344723 27.575684 0 16.475119 8.835616 30.92104 22.124475 39.089898l182.960452 179.626667c18.446463 18.028475 48.343503 18.028475 66.789966 0 18.440678-18.022689 18.440678-47.248633 0-65.271322l-109.388655-107.395616 358.835345-0.316746c26.078734 0 47.225492-20.666576 47.225492-46.158102S800.406418 466.559277 774.327684 466.559277L774.327684 466.559277zM774.327684 466.559277" p-id="4183"></path><path d="M512 92.564972c231.646734 0 419.435028 187.786847 419.435028 419.435028 0 231.646734-187.788294 419.435028-419.435028 419.435028-231.648181 0-419.435028-187.788294-419.435028-419.435028C92.564972 280.351819 280.351819 92.564972 512 92.564972M512 0c-69.079503 0-136.139932 13.550644-199.322757 40.274441-60.980068 25.792362-115.725017 62.696859-162.716203 109.688045-46.991186 46.991186-83.895684 101.736136-109.686599 162.716203C13.550644 375.860068 0 442.920497 0 512s13.550644 136.139932 40.274441 199.322757c25.792362 60.978621 62.696859 115.725017 109.686599 162.716203 46.991186 46.991186 101.737582 83.895684 162.716203 109.688045C375.860068 1010.450802 442.920497 1024 512 1024s136.139932-13.549198 199.322757-40.274441c60.978621-25.792362 115.725017-62.696859 162.716203-109.688045s83.895684-101.737582 109.688045-162.716203C1010.450802 648.139932 1024 581.079503 1024 512s-13.549198-136.139932-40.274441-199.322757c-25.792362-60.980068-62.696859-115.725017-109.688045-162.716203-46.991186-46.991186-101.737582-83.895684-162.716203-109.686599C648.139932 13.550644 581.079503 0 512 0L512 0z" p-id="4184"></path></svg>
    </div>
    <h1>vue2.0仿知乎日报(vue新手入门项目)</h1>
    <p>Updated at<span>2017-10-01</span></p>
    <div class="markdown-body">
      <h1 id="Vue-News"><a href="#Vue-News" class="headerlink" title="Vue-News"></a>Vue-News</h1><blockquote>
<p>一个基于vue全家桶开发的仿知乎日报</p>
<p>项目github地址:<a href="https://github.com/biaodigit/vue-news" target="_blank" rel="external">https://github.com/biaodigit/vue-news</a></p>
<p>如果觉得做得还不错 , 或者项目源码对您有帮助 , 希望您小抬右手到右上角点一个star , 您的支持是作者长期更新维护的动力^_^</p>
</blockquote>
<h2 id="声明"><a href="#声明" class="headerlink" title="声明"></a>声明</h2><blockquote>
<p>『知乎』是 知乎. Inc 的注册商标。本软件与其代码非由知乎创作或维护。软件中所包含的信息与内容皆违反版权与知乎用户协议。本项目所有文字图片等稿件内容均由<a href="https://www.zhihu.com" target="_blank" rel="external">知乎</a>提供，获取与共享之行为或有侵犯知乎权益的嫌疑。若被告知需停止共享与使用，本人会及时删除整个项目。请您了解相关情况，并遵守知乎协议。</p>
</blockquote>
<h2 id="项目起源"><a href="#项目起源" class="headerlink" title="项目起源"></a>项目起源</h2><p>从二月份开始学习<a href="https://cn.vuejs.org/" target="_blank" rel="external">vue</a>学习了一个半月后去跟着<a href="https://github.com/ustbhuangyi" target="_blank" rel="external">滴滴黄轶老师</a>学习他的<a href="http://coding.imooc.com/class/74.html" target="_blank" rel="external">Vue.js高仿饿了么外卖App课程</a>,做完后收获颇丰，对vue的实际项目应用有了基本的了解,同时也学习到了移动端布局，例如flex,1px边框,正方形背景图等等,做完整个课程后决定自己再去做一个小东西去加深巩固vue知识树,因此又花了数天去阅读<a href="https://vuex.vuejs.org/zh-cn/" target="_blank" rel="external">vuex文档</a>,<a href="https://router.vuejs.org/zh-cn/" target="_blank" rel="external">vue-router文档</a>,<a href="https://github.com/mzabriskie/axios" target="_blank" rel="external">axios</a>,以及饿了么前端团队开发的<a href="http://mint-ui.github.io/#!/zh-cn" target="_blank" rel="external">mint-ui</a>,最后在<a href="https://github.com/cccyb" target="_blank" rel="external">博哥</a>的推荐下选择了仿知乎日报作为独立demo的prototype,原因吗很简单，标准的单页面应用，没有太多复杂的交互效果，以及现成的<a href="https://github.com/izzyleung/ZhihuDailyPurify/wiki/%E7%9F%A5%E4%B9%8E%E6%97%A5%E6%8A%A5-API-%E5%88%86%E6%9E%90" target="_blank" rel="external">api接口</a>,然后,就开工啦！</p>
<h2 id="技术栈"><a href="#技术栈" class="headerlink" title="技术栈"></a>技术栈</h2><blockquote>
<p>vue2+vue-router+vuex+axios+better-scroll+mint-ui+stylus</p>
</blockquote>
<h2 id="demo预览地址"><a href="#demo预览地址" class="headerlink" title="demo预览地址"></a>demo预览地址</h2><p><a href="http://lwdvue.cn/#/" target="_blank" rel="external">在线地址</a></p>
<p>PC端建议在chrome浏览器的移动端模式下浏览</p>
<h2 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h2><ul>
<li style="list-style: none"><input type="checkbox" checked> 首页</li>
<li style="list-style: none"><input type="checkbox" checked> 首页滑动图</li>
<li style="list-style: none"><input type="checkbox" checked> 图片懒加载</li>
<li style="list-style: none"><input type="checkbox" checked> 侧边栏过渡动画</li>
<li style="list-style: none"><input type="checkbox" checked> 侧边栏主题列表上下滑动</li>
<li style="list-style: none"><input type="checkbox" checked> 首页下拉刷新</li>
<li style="list-style: none"><input type="checkbox" checked> 首页上拉加载</li>
<li style="list-style: none"><input type="checkbox" checked> 收藏页</li>
<li style="list-style: none"><input type="checkbox" checked> 新闻详情页</li>
<li style="list-style: none"><input type="checkbox" checked> 收藏新闻</li>
<li style="list-style: none"><input type="checkbox" checked> 点赞</li>
<li style="list-style: none"><input type="checkbox" checked> 评论页面</li>
<li style="list-style: none"><input type="checkbox" checked> 评论收起/展开</li>
<li style="list-style: none"><input type="checkbox" checked> 主题页面</li>
<li style="list-style: none"><input type="checkbox" checked> 查看主题主编列表</li>
<li style="list-style: none"><input type="checkbox" checked> 查看主题主编个人主页</li>
</ul>
<h2 id="截图"><a href="#截图" class="headerlink" title="截图"></a>截图</h2><h3 id="首页"><a href="#首页" class="headerlink" title="首页"></a>首页</h3><p><img src="/2017/10/01/vue2.0仿知乎日报/./homepage.gif" alt="homepage.gif"></p>
<h3 id="新闻详情页"><a href="#新闻详情页" class="headerlink" title="新闻详情页"></a>新闻详情页</h3><p><img src="/2017/10/01/vue2.0仿知乎日报/./newdetail.gif" alt="newdetail.gif"></p>
<h3 id="评论页"><a href="#评论页" class="headerlink" title="评论页"></a>评论页</h3><p><img src="/2017/10/01/vue2.0仿知乎日报/./comments.gif" alt="comments.gif"></p>
<h3 id="收藏页"><a href="#收藏页" class="headerlink" title="收藏页"></a>收藏页</h3><p><img src="/2017/10/01/vue2.0仿知乎日报/./collect.gif" alt="collect.gif"></p>
<h3 id="主题页"><a href="#主题页" class="headerlink" title="主题页"></a>主题页</h3><p><img src="/2017/10/01/vue2.0仿知乎日报/./themedetail.gif" alt="themedetail.gif"></p>
<h3 id="主题主编列表页"><a href="#主题主编列表页" class="headerlink" title="主题主编列表页"></a>主题主编列表页</h3><p><img src="/2017/10/01/vue2.0仿知乎日报/./editorlist.gif" alt="editorlist"></p>
<h3 id="主题主编个人主页"><a href="#主题主编个人主页" class="headerlink" title="主题主编个人主页"></a>主题主编个人主页</h3><p><img src="/2017/10/01/vue2.0仿知乎日报/./editor.gif" alt="editor.gif"></p>
<h2 id="存在的bug"><a href="#存在的bug" class="headerlink" title="存在的bug"></a>存在的bug</h2><ul>
<li style="list-style: none"><input type="checkbox"> 下拉刷新时会出现空白</li>
<li style="list-style: none"><input type="checkbox"> 收藏路由过渡动画生硬,且动画只执行了一半</li>
<li style="list-style: none"><input type="checkbox"> 新闻详情页过渡动画出现加载数据量大回退卡顿【此交互已取消,日后或采用weex解决】</li>
<li style="list-style: none"><input type="checkbox" checked> <del>加载下一篇新闻若加载到已加载新闻数组id最后一篇则无法加载下一篇</del></li>
<li style="list-style: none"><input type="checkbox" checked> <del>侧边栏显示滑动穿透</del></li>
</ul>
<h2 id="Todo"><a href="#Todo" class="headerlink" title="Todo"></a>Todo</h2><ul>
<li style="list-style: none"><input type="checkbox"> 流畅的路由过渡动画</li>
<li style="list-style: none"><input type="checkbox"> 手势滑动显示/隐藏侧边栏</li>
<li style="list-style: none"><input type="checkbox" checked> <del>加载下一篇新闻</del></li>
<li style="list-style: none"><input type="checkbox"> 消息页面</li>
<li style="list-style: none"><input type="checkbox"> 设置页面</li>
<li style="list-style: none"><input type="checkbox" checked> <del>夜间模式</del></li>
<li style="list-style: none"><input type="checkbox"> 下拉加载上一篇</li>
<li style="list-style: none"><input type="checkbox"> 上拉加载下一篇</li>
<li style="list-style: none"><input type="checkbox"> vuex重构</li>
<li style="list-style: none"><input type="checkbox"> stylus重构</li>
<li style="list-style: none"><input type="checkbox"> 替换mint-ui组件</li>
<li style="list-style: none"><input type="checkbox"> localStorage</li>
<li style="list-style: none"><input type="checkbox"> 主题页面头部背景图片</li>
<li style="list-style: none"><input type="checkbox"> 手势滑动切换路由页面</li>
<li style="list-style: none"><input type="checkbox"> 解决上述bug</li>
</ul>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><h3 id="知乎接口跨域问题-在此感谢yatecssss前辈做出的贡献"><a href="#知乎接口跨域问题-在此感谢yatecssss前辈做出的贡献" class="headerlink" title="知乎接口跨域问题(在此感谢yatecssss前辈做出的贡献)"></a>知乎接口跨域问题(在此感谢<a href="http://www.yatessss.com/2016/07/08/%E4%BD%BF%E7%94%A8vue%E5%AE%8C%E6%88%90%E7%9F%A5%E4%B9%8E%E6%97%A5%E6%8A%A5web%E7%89%88.html" target="_blank" rel="external">yatecssss</a>前辈做出的贡献)</h3><p>调用知乎API时遇到了跨域问题，但是知乎的接口好像不支持jsonp，谷歌一波发现可以使用vue-cli自带的config的proxyTable文件配置进行解决，配置非常简单：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">proxyTable: &#123;</div><div class="line"> <span class="string">'/api'</span>: &#123;</div><div class="line">    target: <span class="string">'http://news-at.zhihu.com'</span>,</div><div class="line">    changeOrigin: <span class="literal">true</span>,</div><div class="line">    pathRewrite: &#123;</div><div class="line">      <span class="string">'^/api'</span>: <span class="string">'/api/4'</span></div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>此时请求<code>api/xxx</code>将会代理成<code>http://news-at.zhihu.com/api/4/xxx</code><br>这样就不会有跨域问题了，当然这只适用于开发环境。</p>
<h3 id="图片防盗链问题"><a href="#图片防盗链问题" class="headerlink" title="图片防盗链问题"></a>图片防盗链问题</h3><p>知乎API返回的数据中的图片都是存储在知乎服务器上的url地址，直接请求会返回403，所以需要进行一些处理，这里我采用了<a href="https://github.com/yatessss" target="_blank" rel="external">yatessss</a>前辈在<a href="http://www.yatessss.com/2016/07/08/%E4%BD%BF%E7%94%A8vue%E5%AE%8C%E6%88%90%E7%9F%A5%E4%B9%8E%E6%97%A5%E6%8A%A5web%E7%89%88.html" target="_blank" rel="external">使用vue完成知乎日报web版</a>的解决方案，使用<a href="https://images.weserv.nl" target="_blank" rel="external">Images.weserv.nl</a>进行缓存图片，并在需要使用图片url的地方进行相应的替换。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">attachImageUrl(srcUrl) &#123;</div><div class="line">  <span class="keyword">if</span>(srcUrl !== <span class="literal">undefined</span>)&#123;</div><div class="line">     <span class="keyword">return</span> srcUrl.replace(<span class="regexp">/http\w&#123;0,1&#125;:\/\/p/g</span>,<span class="string">'https://images.weserv.nl/?url=p'</span>)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>或<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">attachImageUrl: <span class="function"><span class="keyword">function</span>(<span class="params">body</span>) </span>&#123;</div><div class="line">   <span class="keyword">return</span> body.replace(<span class="regexp">/src="http\w&#123;0,1&#125;:\/\//g</span>, <span class="string">'src="https://images.weserv.nl/?url='</span>)</div><div class="line"> &#125;</div></pre></td></tr></table></figure></p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><blockquote>
<p>感谢<a href="https://github.com/izzyleung" target="_blank" rel="external">izzyleung</a>前辈整理的 <a href="https://github.com/izzyleung/ZhihuDailyPurify/wiki/%E7%9F%A5%E4%B9%8E%E6%97%A5%E6%8A%A5-API-%E5%88%86%E6%9E%90" target="_blank" rel="external">知乎日报API分析</a></p>
<p>感谢<a href="https://github.com/yatessss" target="_blank" rel="external">yatecssss</a> 前辈的<a href="http://www.yatessss.com/2016/07/08/%E4%BD%BF%E7%94%A8vue%E5%AE%8C%E6%88%90%E7%9F%A5%E4%B9%8E%E6%97%A5%E6%8A%A5web%E7%89%88.html" target="_blank" rel="external">使用vue完成知乎日报web版</a>总结</p>
<p>感谢<a href="https://github.com/HunterPen" target="_blank" rel="external">鹏神</a>,<a href="https://github.com/ZWkang" target="_blank" rel="external">康哥</a>,<a href="https://github.com/cccyb" target="_blank" rel="external">博哥</a>,自然哥在开发过程中给予的帮助,心怀感恩,铭记于心！</p>
</blockquote>

    </div>
    <div class="labels">
      
    </div>

    <div class="open-comments">
      <div id="footer">
        Powered by
        <a href="https://hexo.io/" target="_blank">Hexo</a>&nbsp;Theme&nbsp;-&nbsp;
        <a href="https://github.com/cccyb/hexo-theme-mirror" target="_blank">Mirror</a>
        <br />
        <br />
        © 2017 - 2017&nbsp;&nbsp;❤️&nbsp;biaodigit
      </div>
    </div>
  </div>
  <div id="comments"></div>
</div>
<div id="loader" >
  <div></div>
</div>

    <script src="/js/index.js"></script>
  </body>
</html>
